---
page_id: 431e99d2-e8a8-420e-84aa-d52985fbd186
tags:
  - '@tdev/'
  - dynamic-documents
---

import DynamicDocumentRoots from '@tdev-components/documents/DynamicDocumentRoots';
import BrowserWindow from '@tdev-components/BrowserWindow';

# text-message

Textnachrichten erm√∂glichen einen simplen Chat - dies ist eher ein PoC und die Basis f√ºr weitere, unterrichtsrelevante Interaktionsm√∂glichkeiten.


```mdx
import DynamicDocumentRoots from '@tdev-components/documents/DynamicDocumentRoots';

<DynamicDocumentRoots id="732a4df4-26b0-4809-a71b-70d20ccd21a8" />
```

<BrowserWindow>
    <DynamicDocumentRoots id="732a4df4-26b0-4809-a71b-70d20ccd21a8" />
</BrowserWindow>


## Technischer Hintergrund

Die `DocumentRoot` wird verwendet, um in MDX-Dokumenten bspw. Antworten User-Basiert abzuspeichern - es ist das Elternelement f√ºr alle Antworten und jede User:in kann dann ein eigenes `Document` hinzuf√ºgen. √úber die `DocumentRoot` werden auch die Berechtigungen festgelegt.

F√ºr interaktive Anwendung (wie einen (Gruppen)-Chat), die nicht ganze Klassen betreffen, braucht es dynamisch generierte `DocumentRoots`. Um diese dynamischen `DocumentRoots` wiederzufinden, wird ein Dokument `DynamicDocumentRoots` erzeugt und in diesem die `DocumentRoots` abgespeichert. Das mentale Modell dazu: Es werden R√§ume erzeugt, die von einer `DocumentRoot` verwaltet werden, die Raum-Logik entspricht dann jedoch direkt der `DocumentRoot`-Logik. Dadurch funktionieren sowohl "Live-√Ñnderungen" wie auch die Berechtigungen.

Jeder Raum hat einen Namen und eine Raum-Typ (bspw. f√ºr den Chat ist dies `text_messages`).

Ein m√∂gliches Beispiel f√ºr die Struktur der Daten des `DynamicDocumentRoots`:

```json
{
    "documentRoots": [
        {
            "id": "dbc4e980-51d9-4036-b8f5-c26d07fa6dd9",
            "name": "FooBar",
            "type": "text_messages"
        },
        {
            "id": "c35f8a75-a0a7-4a82-8e7f-da53e8e4f9b4",
            "name": "üßÅüç∞üéÇ",
            "type": "text_messages"
        }
    ]
}
```

`id`
: Die eindeutige ID des dynamischen `DocumentRoot`
`name`
: Der Namen des Raums. Dieser wird bspw. im Chat angezeigt.
`type`
: Der Typ des Raums. Dieser bestimmt, welche Komponenten und welche Logik f√ºr den Raum verwendet wird.

:::warning[Aktuelle Einschr√§nkungen]
Bei der Erstellung eines `dynamic_document_roots` werden die Berechtigungen auf `access=RO_DocumentRoot` und `sharedAccess=RW_DocumentRoot` gesetzt - was vern√ºnftige Standards sind. Allerdings kann dadurch nicht direkt ein Dokument erzeugt und hinzugef√ºgt werden, da auch f√ºr ADmins die Berechtigungen nur `RO` sind.
### L√∂sung
Eine Admin-Gruppe muss in der API bspw. als ENV-Variable hinterlegt werden und diese Gruppe wird standardm√§ssig zu jeder `DocumentRoot` mit `RW_GroupPermission` hinzugef√ºgt.
:::


## Installation

:::info[`siteConfig.ts`]

```ts
const config: SiteConfigProvider = {
    apiDocumentProviders: [
        require.resolve('@tdev/text-message/register'),
    ]
}
```
:::
